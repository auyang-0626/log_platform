# log_platform

基于廉价存储、存算分离的新一代云原生日志平台

## 当前主流的日志平台存在的问题（why）?

### 传统的通过登录机器查看的方式
- 登录机器比较繁琐（每次都要通过跳板机）
- 集群场景下，请求不一定落在哪台机器，日志自然也不确定再哪台机器上
- 基于容器部署后，每次发布触发容器销毁，日志也跟着丢了

### 基于ELK的日志存储方式

#### 改进点
- 通过kibana（或类似自己实现的web端）搜索查看日志
- 收集日志统一存储
- 日志可长久保存

这种解决方案看似把传统方式的缺点都解决了，这也是它迅速流行起来的原因，
但是，它也引进了很多问题：

- 日志搜索不精确：我们大多数使用场景是把traceID、时间戳、关键字丢给ES
搜索，但是经常会被莫名其妙的分词，要么查不出来，要么查出来的不是我们想要的
  
- 没有上下文： 我们找到某条关键的日志之后，其实是以这条日志为起点，
  向上或向下滑动，看更多相关的日志，但是ES返回的都是过滤出来的数据
  
- 高昂的成本： 日志数据往往存在 数据量大，价值密度低，使用频次小等特点；
  公司1000研发的情况下，每天的日活大概有100左右； 但是遇到问题，
  这也是我们排查分析非常非常非常最要的依据，不可或缺，而且像支付系统，
  通常希望把日志过期时间设为一年以上，已被不时之需。
  
- ES滥用：毫无疑问，ES是通用且强大的。但是它主要是用来作为搜索引擎，
  倒排索引，分词，匹配度等等特性和优化，对日志场景根本不需要，
  但却为此浪费了很多的内存空间和性能。


## 新一代日志平台的探索

我之前再做中间件的时候，其中从零搭建、推广、维护日志平台大概有一年时间。
当时也是基于elk实现，接入了大概300+应用

